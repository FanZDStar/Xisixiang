# ✅ 项目启动清单

## 第一步：检查项目结构

已完成的文件：

### 页面文件 (src/pages/)

- ✅ `chat/chat.vue` - 智能问答页面
- ✅ `quiz/quiz.vue` - 习题训练页面
- ✅ `theory/theory.vue` - 理论学习列表
- ✅ `theory/document.vue` - 文档详情页
- ✅ `knowledge-graph/knowledge-graph.vue` - 知识图谱页

### 配置文件

- ✅ `pages.json` - 页面路由配置
- ✅ `utils/request.js` - API 请求工具

### 依赖安装

- ✅ `npm install` 已完成

---

## 第二步：启动后端服务

打开一个新的终端窗口：

```powershell
# 进入后端目录
cd d:\project\Xisixiang\server

# 激活虚拟环境（如果有的话）
.\venv\Scripts\Activate.ps1

# 启动后端
python app.py
```

✅ 确认后端运行在：`http://localhost:5000`

---

## 第三步：启动小程序开发

在当前项目目录运行：

```powershell
# 启动微信小程序开发模式
npm run dev:mp-weixin
```

编译产物将生成在：`dist/dev/mp-weixin/`

---

## 第四步：打开微信开发者工具

### 1. 启动微信开发者工具

### 2. 导入项目

- 点击「导入」或「新建项目」
- 项目目录：选择 `d:\project\Xisixiang\xisixiang-uniapp\dist\dev\mp-weixin`
- AppID：选择「测试号」（或填写你的 AppID）
- 项目名称：习思想课程小程序

### 3. 配置开发设置

进入微信开发者工具：

```
详情 → 本地设置
```

勾选以下选项：

- ✅ 不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书
- ✅ 不校验 Https 证书

---

## 第五步：测试功能

### 智能问答

1. 点击「智能问答」Tab
2. 尝试快捷问题按钮
3. 输入自定义问题
4. 检查 AI 回复是否正常显示

### 习题训练

1. 点击「习题训练」Tab
2. 等待题目加载
3. 选择答案并提交
4. 查看解析
5. 完成所有题目查看成绩

### 理论学习

1. 点击「理论学习」Tab
2. 点击任意文档卡片
3. 查看文档详情页
4. 测试返回功能

---

## 常见问题排查

### ❌ 网络请求失败

**现象**：点击提交后没有反应，或显示"网络请求失败"

**解决方案**：

1. 检查后端服务是否运行：访问 http://localhost:5000
2. 检查微信开发者工具是否关闭了域名校验
3. 查看控制台 Network 面板是否有请求发出

### ❌ 页面空白或样式错误

**现象**：页面显示不正常

**解决方案**：

1. 检查控制台是否有报错
2. 清除缓存：详情 → 清除缓存 → 清除所有缓存
3. 重新编译：终端按 `Ctrl+C` 停止，再次运行 `npm run dev:mp-weixin`

### ❌ 题目加载失败

**现象**：习题页面显示"加载失败"

**解决方案**：

1. 确认后端的 `question.json` 文件存在
2. 访问 http://localhost:5000/api/quiz 测试接口
3. 检查后端控制台是否有错误日志

### ❌ Markdown 文档无法加载

**现象**：理论学习文档详情页显示错误

**解决方案**：
目前文档加载功能需要后端配置静态文件服务。

临时解决方案：

- 当前会显示占位内容
- 完整实现需要配置 Flask 静态文件路由

---

## 开发技巧

### 热更新

修改代码后，微信开发者工具会自动刷新，无需手动重启。

### 调试工具

- **Console**：查看日志输出
- **Network**：查看网络请求
- **Storage**：查看本地存储
- **AppData**：查看页面数据

### 快速重启

如果遇到问题，可以：

1. 清除缓存
2. 停止编译服务（`Ctrl+C`）
3. 重新运行 `npm run dev:mp-weixin`
4. 刷新微信开发者工具

---

## 下一步优化

### 短期（1-2 天）

- [ ] 配置后端静态文件服务以支持 Markdown 文档加载
- [ ] 测试所有功能确保正常运行
- [ ] 优化样式细节

### 中期（3-5 天）

- [ ] 集成 towxml 实现完整 Markdown 渲染
- [ ] 实现知识图谱可视化
- [ ] 添加用户学习记录功能

### 长期（1-2 周）

- [ ] 准备小程序上线材料
- [ ] 配置 HTTPS 域名
- [ ] 提交微信审核

---

## 快速命令参考

```powershell
# 启动微信小程序开发
npm run dev:mp-weixin

# 启动 H5 开发（浏览器调试）
npm run dev:h5

# 构建微信小程序
npm run build:mp-weixin

# 启动后端
cd ../server && python app.py
```

---

**当前状态**：✅ 项目已创建，页面已开发完成，准备启动测试  
**下一步**：启动后端服务 → 运行小程序 → 打开微信开发者工具
